<!DOCTYPE html>
<html>
    <head>
        <title>General Statics</title>
        <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
        <style type="text/css">
html {
    background: url("bg.jpg");
}
body {
    background: black url("p2.png") no-repeat top center;
    background-size: contain;
    color: magenta;
    max-width: 44em;
    margin: auto;
    padding: 2em;
}
h1 { 
    background: silver url("data.png") no-repeat top center;
    background-size: 100% 100%;
    color: green;
}
.hidden {
    font-size: small;
    opacity: 0.1;
    herring: #f00;
}
table#game {
    float: right;
    border-collapse: collapse;
    text-align: center;
    background: #400;
    color: white;
    margin: 2em;
}
table#game td {
    border: solid 5px white;
    width: 3em;
    height: 3em;
}
table#game tr:first-child td {
    border-top: 0;
}
table#game tr:last-child td {
    border-bottom: 0;
}
table#game tr td:first-child {
    border-left: 0;
}
table#game tr td:last-child {
    border-right: 0;
}

#login {
    position: absolute;
    bottom: 10px;
}
        </style>
        <script type="text/javascript">
var pending = false;
var aleph = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@";
var board = [[0,0,0],[0,0,0],[0,0,0]];

function clicky(y, x) {
    var td = document.getElementById("t" + y + x);

    if (pending) {
        return;
    }

    if (board[y][x] > 0) {
        return;
    }
        
    board[y][x] = 1;

    // Build up state
    var b = "";
    for (var y = 0; y < 3; y += 1) {
        var acc = 0;

        for (var x = 0; x < 3; x += 1) {
            acc <<= 2;
            acc += board[y][x];
        }
        b += aleph.charAt(acc);
    }

    var request = new XMLHttpRequest();
    request.open("POST", "/ttt.cgi", false);
    request.send("b=" + b);
    if (request.status == 200) {
        var rt = request.responseText;

        if (rt.length == 3) {
            for (var y = 0; y < 3; y += 1) {
                var acc = aleph.indexOf(rt[y]);

                for (var x = 2; x >= 0; x -= 1) {
                    board[y][x] = acc & 3;
                    acc >>= 2;
                }
            }
        } else {
            alert(rt);
        }
    }


    update();
}

function update() {
    var be = document.getElementById("board");

    for (var y = 0; y < 3; y += 1) {
        for (var x = 0; x < 3; x += 1) {
            var e = document.getElementById("t" + y + x);

            if (board[y][x] == 1) {
                e.innerHTML = "X";
            } else if (board[y][x] == 2) {
                e.innerHTML = "O";
            } else {
                e.innerHTML = "";
            }
        }
    }
}

var c = unescape("vlkkrolv.zhk%7D%7F%60msou%3Aao%7F%7Cq%7B%7Bu%3Amk%7Fj%7Ctzp%7Bb9ux%7Chfxob9y%7C%7C%7Ekwngxv");

function u() {
    var o = document.getElementById("output");
    var i = document.getElementById("input").value.split("-");
    var k = i[0];
    var r = parseInt(i[1] || 0);
    var s = [];

    for (i = 0; i < c.length; i += 1) {
        s.push(c.charCodeAt(i) ^ k.charCodeAt(i%3) ^ r);
    }

    console.log(escape(String.fromCharCode.apply(0, s)));
    o.innerHTML = String.fromCharCode.apply(0, s);
    //o.innerHTML = s.join(" ");
}

window.onload = update;
        </script>
    </head>
    <body>
        <h1>General Statics</h1>

        <p>
            General Statics is pleased to announce our shift into the casual gaming
            market.  Please try our new flagship product: Tic-Tac-Toe Extreme!
        </p>

        <table id="game">
            <tr><td id="t00" onclick="clicky(0, 0)"></td><td id="t01" onclick="clicky(0, 1)"></td><td id="t02" onclick="clicky(0, 2)"></td></tr>
            <tr><td id="t10" onclick="clicky(1, 0)"></td><td id="t11" onclick="clicky(1, 1)"></td><td id="t12" onclick="clicky(1, 2)"></td></tr>
            <tr><td id="t20" onclick="clicky(2, 0)"></td><td id="t21" onclick="clicky(2, 1)"></td><td id="t22" onclick="clicky(2, 2)"></td></tr>
            <caption>You play X.  Reload this page to start over.</caption>
        </table>
           
        <p id="output">
            This strategic shift will bring our company back to the forefront
            of revenue-generating companies.
        </p>

        <h2>About Us</h2>

        <p>
            Most strategic planning involves thinking and talking
            about the future.  Crafting and executing strategy requires
            actually making decisions and acting on the future.  And doing
            so in an “expeditionary” manner that enables continuous
            change, flexibility, and adaptability.  
        </p>

        <p>
            General Statics continuously delivers value through leveraging technology to
            change behaviors, processes and practices.  In the Knowledge Economy, many
            of the most decisive sources of value are intangible.  We
            help our clients to optimize both tangible and intangible
            <!-- 8↙4↙3↓9↘3↙4↙6↓3↘3↓7↓7↙13↙4↙5↙3↓8↘7↙ -->
            value.  We deploy and leverage new technologies to change the
            dynamics of organizational processes, relationships, and
            interactions with customers, clients, partners, members, and
            other stakeholders.  This drives enhanced performance, reduces
            costs, and enables enterprises to improve their competitive
            advantage.  
        </p>

        <p>
            Knowledge Age enterprises must realign their strategies,
            processes and practices to the post-recession Economy. 
            New generations of measurement and analytics tools are
            making it possible for enterprises to pursue new
            strategies that lead them to higher planes of nimble
            performance.
        </p>

        <p id="login">
            Employee access:
            <input id="input" onchange="u();">
            <audio autoplay="go" loop="yeah" src="msg.ogg">
        </p>

    </body>
</html>
